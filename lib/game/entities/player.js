// Generated by CoffeeScript 1.3.3
(function() {

  ig.module('game.entities.player').requires('impact.entity').defines(function() {
    return window.EntityPlayer = ig.Entity.extend({
      name: 'player',
      size: {
        x: 10,
        y: 28
      },
      offset: {
        x: 2,
        y: 4
      },
      friction: {
        x: 80,
        y: 80
      },
      collides: ig.Entity.COLLIDES.PASSIVE,
      animSheet: new ig.AnimationSheet('media/player/player.png', 16, 32),
      type: ig.Entity.TYPE.A,
      flip: false,
      maxVel: {
        x: 70,
        y: 70
      },
      init: function(x, y, settings) {
        this.addAnim('idle', 0.1, [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 0]);
        return this.parent(x, y, settings);
      },
      draw: function() {
        return this.parent();
      },
      update: function() {
        this.accel.y = 70;
        this.currentAnim = this.anims.idle;
        if (ig.input.state('left') === ig.input.state('right')) {
          this.currentAnim = this.anims.idle;
        } else {
          if (ig.input.state('left')) {
            this.accel.x = -70;
            this.flip = true;
          } else if (ig.input.state('right')) {
            this.accel.x = 70;
            this.flip = false;
          }
        }
        if (ig.input.state('jump')) {
          this.accel.y = -80;
        }
        if (!ig.input.state('left') && !ig.input.state('right')) {
          this.accel.x = 0;
        }
        if (this.pos.x < 0) {
          this.pos.x = 0;
          this.accel.x = this.vel.x = 0;
        }
        this.parent();
        return this.currentAnim.flip.x = this.flip;
      }
    });
  });

}).call(this);
